<?xml version="1.0" encoding="UTF-8" ?>
<!--원래는 UserMapper 라는 이름이어야 하는데, MapStructure와 겹쳐서 어쩔 수 없이 이름에 Repository를 붙인 것!-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sparta.java_02.domain.user.repository.UserMapperRepository">

  <select id="getUserById" parameterType="Long"
    resultType="com.sparta.java_02.domain.user.dto.SearchUserDto">
    SELECT id,
           name,
           email,
           password_hash,
           created_at,
           updated_at
    FROM user
    WHERE id = #{id}
  </select>

  <insert id="insertUser" parameterType="com.sparta.java_02.domain.user.dto.UserDto">
    INSERT INTO user
    VALUES (#{name}, #{email}, #{passwordHash}, now(), now())
  </insert>

  <update id="updateUser" parameterType="com.sparta.java_02.domain.user.dto.UserDto">
    UPDATE user
    SET name = #{email}
    WHERE id = #{id}
  </update>

  <delete id="deleteUser" parameterType="Long">
    DELETE
    FROM user
    WHERE id = #{id}
  </delete>
  
</mapper>